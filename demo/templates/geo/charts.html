{% extends "dashboard/base.html" %}
{% load static %}

{% block page_name %}City <b>{{ object.name }}</b>{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="#!">Geo</a></li>
<li class="breadcrumb-item"><a href="{% url 'geo:charts' %}">Charts</a></li>
{% endblock %}

{% block main_content %}
<div class="row">
    <div class="col-md-12 col-lg-12">
        <a class="btn btn-primary m-t-5 mb-4 collapsed" data-toggle="collapse" href="#tech_stack" role="button" aria-expanded="false" aria-controls="collapseExample">Tech Stack</a>
        <div class="collapse" id="tech_stack" style="">
            <div class="card">
                <h4 class="card-header">How It Works</h4>
                <div class="card-body">
                    <div>
                        <p>This page visualizes database records using some grouping and simple computations, using <b>Apexcharts</b> plugin for it.</p>
                    </div>

                    <h4>Tech Stack</h4>
                    <ul class="nav nav-tabs mb-3" id="features_Tab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link text-uppercase active" id="django-features-tab" data-toggle="tab" href="#django_feature" role="tab" aria-controls="django_feature" aria-selected="true">Django</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-uppercase" id="orm-features-tab" data-toggle="tab" href="#orm_feature" role="tab" aria-controls="orm_feature" aria-selected="true">Django ORM</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-uppercase" id="drf-features-tab" data-toggle="tab" href="#drf_feature" role="tab" aria-controls="drf_feature" aria-selected="false">Django Rest Framework</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-uppercase" id="postgres-features-tab" data-toggle="tab" href="#postgres_feature" role="tab" aria-controls="postgres_feature" aria-selected="false">PostgreSQL</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-uppercase" id="apexcharts-features-tab" data-toggle="tab" href="#apexcharts_feature" role="tab" aria-controls="datatables_feature" aria-selected="false">Apexcharts</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="features_Content">
                        <div class="tab-pane fade active show" id="django_feature" role="tabpanel" aria-labelledby="django-feature-tab">
                            <p class="mb-0">This page uses Django to get HTML content which is inherited from base template with menus, breadcrumbs, etc.,
                                and includes table based on DataTable plugin, as well as javascript and css styles.</p>
                            <p class="mb-0">Table provides visualizes Database records from City model (db table), so Django models make sense here.</p>
                            <p class="mb-0">
                                Django Template Language is used to generate html page using inheritance,
                                "include", "extend", "url", "static" template tags and context processors.
                            </p>
                            <p class="mb-2">Django application is ran under Daphne as a separate service.</p>
                        </div>
                        <div class="tab-pane fade" id="orm_feature" role="tabpanel" aria-labelledby="orm-feature-tab">
                            <p class="mb-0">One of the most powerful features of Django is its Object-Relational Mapper (ORM), which enables you to interact with your database, like you would with SQL.</p>
                            <p class="mb-2">It allows to create very complex SQL queries in one line and make useful data manipulations and aggregations.</p>
                        </div>
                        <div class="tab-pane fade" id="drf_feature" role="tabpanel" aria-labelledby="drf-feature-tab">
                            <p class="mb-0">DRF handles API requests and does it well.</p>
                            <p class="mb-0">It allows to create API views using various number of base classes and simplifies developer work.</p>
                            <p class="mb-2">See <a href="{% url 'drf-swagger-ui' %}" target="_blank">DRF Swagger page</a> for details.</p>
                        </div>
                        <div class="tab-pane fade" id="postgres_feature" role="tabpanel" aria-labelledby="postgres-feature-tab">
                            <p class="mb-0">PostgreSQL is used as a database for Django in this project.</p>
                            <p class="mb-2">We may use any other RDBM like MySQL, MSSQL, Sqlite.</p>
                        </div>
                        <div class="tab-pane fade" id="apexcharts_feature" role="tabpanel" aria-labelledby="apexcharts-feature-tab">
                            <p class="mb-0">Apexcharts just simplifies our life when we want to visualize some data via charts.</p>
                            <p class="mb-2">It is easy to plugin and use apexcharts creating amazing content.</p>
                            <p class="mb-2">See <a href="https://apexcharts.com/" target="_blank">https://apexcharts.com/</a> for details.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>Top 10 Countries by Area</h5>
            </div>
            <div class="card-body">
                <div id="countries-area-chart" style="width:100%"></div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>Top 10 Countries by Population</h5>
            </div>
            <div class="card-body">
                <div id="countries-population-chart" style="width:100%"></div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>Top 10 Countries by Cities Number</h5>
            </div>
            <div class="card-body">
                <div id="country-cities-chart" style="width:100%"></div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script type="text/javascript">
    {% include "geo/charts.js" %}
</script>
{% endblock %}
